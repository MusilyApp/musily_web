import{d as T,C as N,D as L,P as j,E as l,G as w,r as I,H,L as E,B as A,w as F,I as P,J as k,K as O,M as q,N as M,O as U,S as V,Q as z,R as D,T as G,U as J,F as Q,_ as W,b as X,o as Y,v as Z}from"./o-bWHR9X.js";const B=(n="RouteProvider")=>T({name:n,props:{vnode:{type:Object,required:!0},route:{type:Object,required:!0},vnodeRef:Object,renderKey:String,trackRootNodes:Boolean},setup(a){const e=a.renderKey,u=a.route,o={};for(const r in a.route)Object.defineProperty(o,r,{get:()=>e===a.renderKey?a.route[r]:u[r],enumerable:!0});return N(j,L(o)),()=>l(a.vnode,{ref:a.vnodeRef})}}),$=B(),S=new WeakMap,ee=T({name:"NuxtPage",inheritAttrs:!1,props:{name:{type:String},transition:{type:[Boolean,Object],default:void 0},keepalive:{type:[Boolean,Object],default:void 0},route:{type:Object},pageKey:{type:[Function,String],default:null}},setup(n,{attrs:a,slots:e,expose:u}){const o=w(),r=I(),i=H(j,null);let c;u({pageRef:r});const s=H(E,null);let d;const m=o.deferHydration();if(o.isHydrating){const t=o.hooks.hookOnce("app:error",m);A().beforeEach(t)}n.pageKey&&F(()=>n.pageKey,(t,y)=>{t!==y&&o.callHook("page:loading:start")});let f=!1;{const t=A().beforeResolve(()=>{f=!1});P(()=>{t()})}return()=>l(D,{name:n.name,route:n.route,...a},{default:t=>{const y=ne(i,t.route,t.Component),R=i&&i.matched.length===t.route.matched.length;if(!t.Component){if(d&&!R)return d;m();return}if(d&&s&&!s.isCurrent(t.route))return d;if(y&&i&&(!s||s!=null&&s.isCurrent(i)))return R?d:null;const g=k(t,n.pageKey),_=ae(i,t.route,t.Component);!o.isHydrating&&c===g&&!_&&(o.callHook("page:loading:end"),f=!0),c=g;const h=!!(n.transition??t.route.meta.pageTransition??O),C=h&&te([n.transition,t.route.meta.pageTransition,O,{onAfterLeave:()=>{o.callHook("page:transition:finish",t.Component)}}]),b=n.keepalive??t.route.meta.keepalive??q;return d=M(h&&C,U(b,l(V,{suspensible:!0,onPending:()=>o.callHook("page:start",t.Component),onResolve:()=>{z(()=>o.callHook("page:finish",t.Component).then(()=>{if(!f&&!_)return f=!0,o.callHook("page:loading:end")}).finally(m))}},{default:()=>{const K={key:g||void 0,vnode:e.default?oe(e.default,t):t.Component,route:t.route,renderKey:g||void 0,trackRootNodes:h,vnodeRef:r};if(!b)return l($,K);const p=t.Component.type,x=p;let v=S.get(x);return v||(v=B(p.name||p.__name),S.set(x,v)),l(v,K)}}))).default(),d}})}});function te(n){const a=n.filter(Boolean).map(e=>({...e,onAfterLeave:e.onAfterLeave?G(e.onAfterLeave):void 0}));return J(...a)}function ne(n,a,e){if(!n)return!1;const u=a.matched.findIndex(o=>{var r;return((r=o.components)==null?void 0:r.default)===(e==null?void 0:e.type)});return!u||u===-1?!1:a.matched.slice(0,u).some((o,r)=>{var i,c,s;return((i=o.components)==null?void 0:i.default)!==((s=(c=n.matched[r])==null?void 0:c.components)==null?void 0:s.default)})||e&&k({route:a,Component:e})!==k({route:n,Component:e})}function ae(n,a,e){return n?a.matched.findIndex(o=>{var r;return((r=o.components)==null?void 0:r.default)===(e==null?void 0:e.type)})<a.matched.length-1:!1}function oe(n,a){const e=n(a);return e.length===1?l(e[0]):l(Q,void 0,e)}const re={};function ie(n,a){const e=ee;return Y(),X("div",null,[Z(e)])}const ue=W(re,[["render",ie]]);export{ue as default};
